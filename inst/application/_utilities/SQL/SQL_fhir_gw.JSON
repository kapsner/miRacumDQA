{
  "Person.Demographie.AdministrativesGeschlecht": "SELECT     r1.pid AS \"Person.Patient.Patienten-Identifikator.Patienten-Identifikator\",     r2.gender AS \"Person.Demographie.AdministrativesGeschlecht\" FROM ( SELECT * FROM ( SELECT REPLACE(jsonb_path_query(DATA, '$.subject') ->> 'reference', 'Patient/', '') AS pid, to_timestamp(jsonb_path_query(DATA, '$.period') ->> 'start', 'YYYY-MM-DDTHH:MI:SS') AS fhir_start_date FROM resources WHERE TYPE = 'Encounter') AS r_intermediate ) r1, LATERAL ( SELECT DATA ->> 'gender' AS gender FROM resources r_intermediate WHERE TYPE = 'Patient' AND ( (DATA ->> 'id' = r1.pid) )) r2;",
  "Person.Demographie.Geburtsdatum": "SELECT     r1.pid AS \"Person.Patient.Patienten-Identifikator.Patienten-Identifikator\",     r2.birthdate AS \"Person.Demographie.Geburtsdatum\" FROM ( SELECT * FROM ( SELECT REPLACE(jsonb_path_query(DATA, '$.subject') ->> 'reference', 'Patient/', '') AS pid, to_timestamp(jsonb_path_query(DATA, '$.period') ->> 'start', 'YYYY-MM-DDTHH:MI:SS') AS fhir_start_date FROM resources WHERE TYPE = 'Encounter') AS r_intermediate ) r1, LATERAL ( SELECT DATA ->> 'birthDate' AS birthdate FROM resources r_intermediate WHERE TYPE = 'Patient' AND ( (DATA ->> 'id' = r1.pid) )) r2;",
  "Fall.Einrichtungskontakt.Aufnahmenummer": "SELECT r1.pid AS \"Person.Patient.Patienten-Identifikator.Patienten-Identifikator\", r1.jsonbdata ->> 'id' AS \"Fall.Einrichtungskontakt.Aufnahmenummer\" FROM ( SELECT * FROM ( SELECT DATA AS jsonbdata, REPLACE(jsonb_path_query(DATA, '$.subject') ->> 'reference', 'Patient/', '') AS pid, to_timestamp(jsonb_path_query(DATA, '$.period') ->> 'start', 'YYYY-MM-DDTHH:MI:SS') AS fhir_start_date FROM resources WHERE TYPE = 'Encounter') AS r_intermediate ) r1;",
  "Person.Patient.Patienten-Identifikator.Patienten-Identifikator": "SELECT r1.pid AS \"Person.Patient.Patienten-Identifikator.Patienten-Identifikator\", r1.jsonbdata ->> 'id' AS \"Fall.Einrichtungskontakt.Aufnahmenummer\" FROM ( SELECT * FROM ( SELECT DATA AS jsonbdata, REPLACE(jsonb_path_query(DATA, '$.subject') ->> 'reference', 'Patient/', '') AS pid, to_timestamp(jsonb_path_query(DATA, '$.period') ->> 'start', 'YYYY-MM-DDTHH:MI:SS') AS fhir_start_date FROM resources WHERE TYPE = 'Encounter') AS r_intermediate ) r1;",
  "Fall.Einrichtungskontakt.Beginndatum": "SELECT r1.pid AS \"Person.Patient.Patienten-Identifikator.Patienten-Identifikator\", to_timestamp(jsonb_path_query(r1.jsonbdata, '$.period') ->> 'start', 'YYYY-MM-DDTHH:MI:SS') AS \"Fall.Einrichtungskontakt.Beginndatum\" FROM ( SELECT * FROM ( SELECT DATA AS jsonbdata, REPLACE(jsonb_path_query(DATA, '$.subject') ->> 'reference', 'Patient/', '') AS pid, to_timestamp(jsonb_path_query(DATA, '$.period') ->> 'start', 'YYYY-MM-DDTHH:MI:SS') AS fhir_start_date FROM resources WHERE TYPE = 'Encounter') AS r_intermediate ) r1;",
  "Person.Demographie.Adresse.PLZ": "SELECT     r1.pid AS \"Person.Patient.Patienten-Identifikator.Patienten-Identifikator\",     r2.plz AS \"Person.Demographie.Adresse.PLZ\" FROM ( SELECT * FROM ( SELECT REPLACE(jsonb_path_query(DATA, '$.subject') ->> 'reference', 'Patient/', '') AS pid, to_timestamp(jsonb_path_query(DATA, '$.period') ->> 'start', 'YYYY-MM-DDTHH:MI:SS') AS fhir_start_date FROM resources WHERE TYPE = 'Encounter') AS r_intermediate ) r1, LATERAL ( SELECT jsonb_array_elements(jsonb_path_query(DATA, '$.address')) ->> 'postalCode' AS plz FROM resources r_intermediate WHERE TYPE = 'Patient' AND ( (DATA ->> 'id' = r1.pid) )) r2;",
  "Diagnose.ICD10GMDiagnoseKodiert.Vollst\u00e4ndigerDiagnosecode": "SELECT r1.jsonbdata ->> 'id' AS \"Fall.Einrichtungskontakt.Aufnahmenummer\", r2.icd_code AS \"Diagnose.ICD10GMDiagnoseKodiert.Vollst\u00e4ndigerDiagnosecode\" FROM ( SELECT * FROM ( SELECT DATA AS jsonbdata, to_timestamp(jsonb_path_query(DATA, '$.period') ->> 'start', 'YYYY-MM-DDTHH:MI:SS') AS fhir_start_date FROM resources WHERE TYPE = 'Encounter') AS r_intermediate ) r1, LATERAL ( SELECT jsonb_array_elements(jsonb_path_query(DATA, '$.code.coding')) ->> 'code' AS icd_code FROM resources WHERE TYPE = 'Condition' AND ( (REPLACE(DATA -> 'encounter' ->> 'reference', 'Encounter/', '') = (r1.jsonbdata ->> 'id')) )) r2;"
}